<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="author" content="Михаил Беляков"><meta name="description" content="Домашняя страница"><meta name="keywords" content="Домашняя страница"><meta property="og:type" content="article"><meta property="og:title" content="Заголовок статьи или страницы"><meta property="og:description" content="Описание статьи или страницы"><meta property="og:image" content="Ссылка на главное изображение"><meta property="og:url" content="Постоянная ссылка"><meta property="og:site_name" content="Имя сайта"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="assets/images/logo.svg"><link rel="stylesheet" type="text/css" href="assets/index-XJP0JuPtJ.css"><title>Домашняя страница</title></head><body><header><div id="brand"><a href="/">Домашняя страница</a></div><div id="burger"></div><div id="links"> <div class="link"> <a class="bi x" href="#" title="Закрыть"> </a></div><div class="link"> <a class="bi file-earmark-check" href="eula/">EULA</a></div><div class="link"> <a class="bi image" href="icons/">Иконки</a></div><div class="link"> <a class="bi clock" href="funny/">Часы</a></div><div class="link"> <a class="bi github" href="https://github.com/yababay/cheburgen" target="_blank">Github</a></div></div><script src="assets/burger.js" defer> </script></header><main><article><div style="position: absolute; top: 1rem; right: 1rem">
    <a href="https://yababay.github.io/cheburgen/">Образец сгенерированного сайта</a>
</div>
<p><img src="cheburlogo.png" alt="Логотип проекта" /></p>
<h1 id="cheburgenssrssg">Cheburgen: SSR/SSG сервер</h1>
<h2 id="">Обзор современных веб-технологий</h2>
<p>Современный подход к веб-разработке предполагает слабое участие сервера в визуализации контента. Он в основном занят формированием абстрактных данных и передачей их клиенту в соответствии с концепциями <code>REST-API/CRUD</code> в форматах <code>json</code>, <code>xml</code> и т.п. Формированием динамического внешнего вида веб-страницы занимается, в основном, сам браузер. Именно на организацию такого его поведения направлены современные фреймворки (<code>Angular</code>, <code>React</code>, <code>Vue</code>, <code>Svelt</code> и другие). Фреймворки позволяют создавать многократно используемые компоненты, обеспечивают реактивность во взаимодействии с пользователем, могут корректировать внешний вид с помощью встроенных <code>css</code>-инструментов. </p>
<p>Разработка с помощью фреймворков завоевала большую популярность, но у нее есть существенный недостаток. С точки зрения поисковой оптимизации (SEO) такие страницы выглядят абсолютно пустыми. Например, можно написать сколь угодно богатое возможностями интерактивное <code>React</code>-приложение, "обернув" его вокруг корневого элемента, но поисковые машины увидят лишь</p>
<pre><code class="html language-html">&lt;div id="root"&gt;&lt;/div&gt;
</code></pre>
<p>Такой сайт вряд ли займет высокие позиции в рейтингах <code>Google</code>, <code>Яндекс</code> и других кравлеров. А вот такая веб-страница продвинется гораздо выше:</p>
<pre><code class="html language-html">&lt;h1&gt;Пирожки на Казанском вокзале&lt;/h1&gt;
&lt;ul&gt;
    &lt;li&gt;с капустой - 20 руб.&lt;/li&gt;
    &lt;li&gt;с повидлом - 30 руб.&lt;/li&gt;
    &lt;li&gt;с ливером - 45 руб.&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>Однако писать на чистом <code>html</code> утомительно. Задействовать многократно используемые компоненты при таком подходе можно лишь копируя их в редакторе через буфер обмена. Именно поэтому сохраняет популярность технология <a href="https://ru.wikipedia.org/wiki/Model-View-Controller"><code>MVC</code></a>, когда <code>html</code>-документы формируются на стороне сервера, который при необходимости инжектирует в них данные. В качестве примеров можно привести  <code>CGI</code>, <code>PHP</code>, <code>ASP</code>, <code>JSP</code> и т.д.</p>
<p>У <code>MVC</code>-продуктов есть, однако, существенный недостаток: при переключении со страницы на страницу конечный пользователь видит на доли секунды белый экран (<code>white flash</code>). Поэтому для человеческого зрения комфортнее приложения в формате <code>SPA (Single Page Application)</code>, т.е. такие, где динамически перерисовывается только та часть экрана, которая действительно требует обновления, которые, как правило, опираются на запрашиваемые у сервера <code>REST</code>-данные. Таким образом, мы снова приходим к клиентским технологиям, неблагоприятным для <code>SEO</code>. Однако в разработке возможны компромиссы: те элементы, которые требуют интерактивности (например, при валидации форм) можно писать на фреймворках, остальное на  <code>html</code>. Единственная проблема, которая при этом остается - затрудненность привлечения многократно используемых компонентов. Эту задачу и решают нижеописанные технологии.</p>
<h2 id="ssrssg">Технологии SSR/SSG</h2>
<p><code>SSR (Server Side Rendering)</code> напоминает по принципу действия <code>MVC</code>. Формирование веб-страниц производится на стороне сервера, только собираются они из компонентов, написанных на "клиентских" фреймворках (<code>React и Next</code>, <code>Vue и Nuxt</code> и т.д.). </p>
<p><code>SSR</code>-бэкендами обзавелись в последнее время все популярные фреймворки. Однако изначально они не предназначались для таких целей и, по-видимому, не имеют явных преимуществ перед "старыми" <code>MVC</code>-технологиями. Складывается даже впечатление, что <code>SSR</code> стал паническим ответом разработчиков клиентских фреймворков на претензии пользователей о том, что их приложения не попадают на высокие позиции в поисковых системах. Кроме того, превратить приложение, написанное, скажем, на "клиентском" <code>React'e</code> в <code>SSR-React</code> не так уж просто. Многие фреймворк-разработчики не обладают для этого достаточной квалификацией. Тем не менее, <code>SSR</code> - это компромисс, позволяющий как сгенерировать насыщенные возможностями веб-приложения, так и оставить в них достаточно <code>html</code>-разметки, чтобы содержание было обнаружено поисковыми машинами.</p>
<p>Окончательным этапом формирования страниц на серверах с поддержкой <code>SSR</code> является <code>SSG - Server Side Generation</code>, т.е. превращение всех страниц сайта в статические файлы, которые можно выгрузить на простой хостинг. Как правило, это <code>html, css, js</code> файлы, непосредственно распознаваемые браузерами.</p>
<h2 id="cheburgenssrssg-1">Cheburgen: SSR/SSG без фреймфорков</h2>
<p><code>Cheburgen</code> - веб-сервер для разработки статических страниц. Результат отображается по мере правки кода, т.е. после сохранения исходного файла страница в браузере обновляется.</p>
<p>Исходный код сайта находится в директории <code>src</code>, в которой созданы три раздела: <code>pages</code>, <code>components</code> и <code>styles</code>. В первой - шаблоны в формате <a href="https://pugjs.org/api/getting-started.html"><code>pug</code></a>, который поддерживает составление страниц из многократно используемых компонентов. Они помещены в соответствующую директорию - <code>components</code>. Директория <code>styles</code> предназначена для хранения стилевых таблиц в формате <code>sass/scss</code>. </p>
<p><img src="cheburgen-menu-1.png" alt="" /></p>
<p>Поддерживается сборка компонентов, описанных в файлах <code>_rollup.config.mjs</code> (см. пример в директории <code>src/pages/funny</code>). Они могут быть написаны в форматах <code>jsx</code>, <code>vue</code>, <code>svelte</code> и любых других, поддерживаемых сборщиком <a href="https://rollupjs.org/"><code>rollup</code></a> и  его плагинами.</p>
<p>Сервер поддерживает вставку иконок <a href="https://icons.getbootstrap.com/"><code>bootstrap-icons</code></a>, хотя можно интегрировать и другие наборы. </p>
<h2 id="-1">Установка и запуск</h2>
<p>Установка шаблона производится командой</p>
<pre><code class="bash language-bash">npx cheburgen-setup@latest &lt;my-app&gt;
</code></pre>
<p>Здесь <code>&lt;my-app&gt;</code> следует заменить на имя директории, в которой будет вестись разработка. После установки следует перейти в нее и выполнить</p>
<pre><code class="bash language-bash">npm i
npm run dev
</code></pre>
<p>Затем открыть в браузере <a href="http://localhost:6704/">адрес</a>.</p>
<h2 id="-2">Упаковка и выгрузка</h2>
<p>Закончив разработку веб-страниц, следует выполнить </p>
<pre><code class="bash language-bash">npm run build
</code></pre>
<p>В результате сформируется директория <code>dist</code>, в которой окажутся файлы в стандартных веб-форматах. Шаблоны <code>pug</code> будут преобразованы в <code>html</code>, <code>scss</code> - в обычные <code>css</code>-файлы. В <code>dist</code> также попадает все содержимое директории <code>public</code> в неизменном виде. </p>
<p>После сборки можно запустить <code>live-server</code> в среде <code>VS-Code</code> и убедиться в добротности результата. Он должен выглядеть так же, как и при работающем сервере.</p>
<h2 id="-3">О происходжении названия</h2>
<p>Слово "чебурген" упоминается в советских анекдотах как указание на некий гибрид, созданный из, казалось бы, несовместимых компонентов. Сервер <code>Cheburgen</code> также гетерогенен. В него интегрированы технологии от многих разработчиков, причем заложена возможность расширения их круга. Можно, например, добавлять форматы файлов, из которых будут получаться веб-страницы (<code>jsx</code>, <code>vue</code> и др.), наборы иконок, стилевые предпроцессоры и т.п. </p>
<p><img src="cheburgen.jpeg" alt="Чебурген" /></p>
<p>Логотип проекта также содержит отсылку к известному мультфильму. От Крокодила Гены на нем зеленая ломаная линия, от Чебурашки - повернутая на 45 градусов голова с ушами, символизирующая также спираль ДНК.</p></article></main><footer>&copy;&nbsp;Михаил Беляков&nbsp;2023</footer></body></html>